<html py:extends="master.xhtml" py:strip="True">
<head py:block="head" py:strip="True">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" py:if="False"/>
    <link rel="stylesheet" type="text/css" media="screen" href="${tg.url('/_pluggable/mailtemplates/css/style.css')}" />
</head>

<body py:block="body" py:strip="True">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
    <div class="mail-templates-title">Dashboard MailTemplates</div>
    <a href="${tg.url('/mailtemplates/new_model')}" class="pull-right">Add Model</a>
            </div>
        </div>
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div py:for="model in mail_models" class="panel panel-primary panel-model ${model.name}-class">
              <!-- Default panel contents -->
              <div class="panel-heading">${model.name}</div>
              <div class="panel-body">
                <p>${model.usage}</p><a href="${tg.url('/mailtemplates/edit_description', params=dict(model_id=model._id))}" class="pull-right"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit description</a>
              </div>
              <!-- Table -->
              <div class="table-responsive">
              <table class="table card-table">
                <tbody>
                    <tr py:for="translation in model.template_translations">

                        <td>
                            ${translation.language}
                        </td>
                        <td>
                            <b>${translation.subject}</b>
                        </td>
                        <td class="body-preview">
                            <a href="${tg.url('/mailtemplates/edit_translation', params=dict(translation_id=translation._id))}" class="btn btn-primary btn-edit"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a><pre class="scrollable"> ${translation.body}</pre>
                        </td>
                    </tr>
                <tr>
                    <td colspan="3"><a href="${tg.url('/mailtemplates/new_translation', params=dict(model_id=model._id))}">Add translation</a> </td>
                </tr>
                </tbody>
            </table>
            </div>
            </div>


        </div>
    </div>
</body>
</html>
